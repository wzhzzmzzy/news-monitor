# TrendRadar 进阶功能：跨周期趋势追踪与分析 (Multi-Day Analysis)

## 1. 核心目标
当前的 TrendRadar 提供了优秀的“当日快照”，但无法回答“这个话题热了多久？”或“它是突然爆发还是缓慢升温？”等问题。
本功能旨在引入 **时间跨度维度**（3-7 天），通过跨周期的记忆能力，识别出真正具有长期价值的深度趋势，过滤掉昙花一现的噪音。

## 2. 核心功能描述

### 2.1 持续时间标注 (Duration Tracking)
系统将追踪每个核心热点的生命周期，并在报告中明确标注其“存续时长”。
*   **持续天数**：识别同一话题在过去 7 天内出现的总天数（如：持续 3 天）。
*   **首次发现日**：记录该话题最初进入雷达的时间点，帮助用户追溯源头。

### 2.2 基于持续时间的权重增强 (Duration-based Weighting)
系统将改变以往“只看热度分”的排序逻辑，引入“时间加权”：
*   **权重增益**：对于持续活跃超过 2 天的话题，系统会赋予更高的权重。这意味着即使某个老话题今日的瞬时热度略低于某个新热点，它仍可能因其“长效影响力”被排在报告更靠前的位置。
*   **噪音过滤**：通过拉长时间维度，系统可以更容易地识别并降权那些仅在几小时内刷屏、但毫无后续进展的“瞬时噪音”。

### 2.3 辅助实时流分析 (Auxiliary Stream Analysis)
**[配置激活制]**：该模块仅在用户配置了 `stream_sources` 时生效。

*   **辅助证据链 (Evidence Linking)**：
    *   实时流数据不作为独立条目占据报告主位，而是自动关联至相关的热搜话题下。
    *   **时间线补充**：在主话题下方以微缩时间轴形式展示关键动态点，提供更细粒度的演变细节。
*   **首发溯源 (First-Seen Tracking)**：
    *   通过比对动态流与热搜的时间差，为热点标注“预警领先时长”，增强情报的专业感。
*   **哨兵预警 (Sentinel Watch)**：
    *   在报告末尾开辟极小区块，展示“流中已热、榜上未见”的潜力关键词，作为明日趋势的预读。

## 3. 报告呈现效果

系统将根据配置**自适应**生成报告：

1.  **基础模式 (无实时流)**：仅展示趋势概览表和话题深度回顾。
2.  **增强模式 (已配置实时流)**：在基础报告上，自动插入“首发标记”、“时间轴补充”和“哨兵预警”板块。

## 4. 调度与执行频率 (Scheduling)

系统采用阶梯式调度，以平衡情报的实时性与分析的深度：

*   **实时流轮询 (每 30 分钟)**：
    *   **对象**：仅限 `stream_sources`（快讯、电报等）。
    *   **目的**：保持对突发事件的敏锐嗅觉，为后续热榜分析积累时间线素材。
*   **主干热榜轮询 (每 2 小时)**：
    *   **对象**：所有 `hotlist_sources`（微博热搜、知乎热榜等）。
    *   **同步动作**：每 2 小时触发一次 **核心分析任务 (Analysis Task)**。
    *   **数据整合**：分析任务将读取过去 2 小时内的 4 次实时流记录 + 当下的热榜数据，进行关联建模。

## 5. 业务逻辑流程 (更新后)

1.  **沉淀与积累**：系统在生成每日总结的同时，会自动提炼并存储一份“核心摘要”，作为后续分析的参考素材。
2.  **多维回溯**：在触发日报任务时，系统会自动检索设定的时间窗口（如 3 或 7 天）内的所有历史摘要。
3.  **对比推理**：利用 AI 的逻辑推理能力，对比“历史记录”与“今日实况”，得出趋势演变结论。
4.  **生成洞察**：将分析结果转化为结构化的 Markdown 报告，并通过邮件推送。

## 5. 用户配置
用户可以在配置中灵活调整：
*   **分析跨度**：选择分析过去 3 天、5 天或 7 天的数据。
*   **分析深度**：选择是否开启“跨事件关联分析”。
